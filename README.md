Лабораторная №6

Задание №1: Аннотация @Invoke
Разработать аннотацию @Invoke, которая применяется только к методам, доступна во время выполнения и не имеет свойств. Создать класс с несколькими методами, часть из которых аннотировать. Реализовать обработчик, который через Reflection вызывает такие методы автоматически.

Классы:
Invoke — аннотация для методов.

TestClass — содержит обычные и аннотированные методы.

Handler — обработчик, проверяющий наличие аннотации и вызывающий методы.

Результат: <img width="240" height="94" alt="image" src="https://github.com/user-attachments/assets/311c1768-13a7-4b89-a748-db344e55abf7" />

Аннотированные методы вызываются автоматически при обработке.

Задание №2: Аннотация @Default
Разработать аннотацию @Default, которая применяется к типам и полям, доступна во время выполнения и имеет обязательное свойство value типа Class. Создать классы и поля с этой аннотацией. Реализовать обработчик, который выводит указанный тип по умолчанию. Дополнительно написать тесты на JUnit.

Классы:
Default — аннотация с обязательным свойством value.

ClassAnnotation — аннотирован типом String.

FieldAnnotation — содержит поле с типом Integer по умолчанию.

ListAnnotation — аннотирован типом List.

TestClass2 — аннотирован типом String, содержит поля с разными типами по умолчанию.

Handler — обработчик, проверяющий аннотации на классах и полях.

AnnotationTest — тесты на JUnit: проверка аннотации на классе, поле, отсутствие аннотации, параметризованный тест для нескольких классов.

Результат: <img width="545" height="126" alt="image" src="https://github.com/user-attachments/assets/36103c7a-fd3b-43fb-b216-d7d6c9a0df0c" />

Аннотация корректно считывается, тесты подтверждают работу обработчика.

Задание №3: Аннотация @ToString
Разработать аннотацию @ToString, которая применяется к типам и полям, доступна во время выполнения и имеет необязательное свойство value (YES или NO). По умолчанию YES. Создать класс с аннотацией и полем, исключённым из строкового представления. Реализовать генератор строкового представления объекта.

Классы:
Mode — перечисление YES/NO.

ToString — аннотация для классов и полей.

TestClass3 — аннотирован YES, одно поле исключено (NO).

ToStringGenerator — формирует строковое представление объекта, включая только поля с YES.

Результат: <img width="280" height="73" alt="image" src="https://github.com/user-attachments/assets/dc405ddf-b4d4-435a-afa8-852bf23bcff6" />

Строка формируется с учётом аннотации, исключённые поля не выводятся.

Задание №4: Аннотация @Validate
Разработать аннотацию @Validate, которая применяется к типам и аннотациям, доступна во время выполнения и имеет обязательное свойство value типа Class[]. Создать класс с аннотацией, передав список типов для проверки. Реализовать обработчик, который выводит список классов.

Классы:
Validate — аннотация с массивом классов.

User — класс с полями name и age.

Product — класс с полями name и price.

TestClass4 — аннотирован @Validate(User, Product), содержит методы для обработки данных.

HandlerVal — обработчик, выводящий список классов из аннотации.

Результат: <img width="632" height="114" alt="image" src="https://github.com/user-attachments/assets/31967548-8818-4bf0-8921-974dc213e52c" />

Обработчик выводит список классов, указанных в аннотации.

Задание №5: Аннотация @Two
Разработать аннотацию @Two, которая применяется к типам, доступна во время выполнения и имеет два обязательных свойства: first (String) и second (int). Создать класс с аннотацией и реализовать обработчик, который выводит значения свойств.

Классы:
Two — аннотация с двумя обязательными свойствами.

HandlerTwo — класс, аннотированный @Two(first="Hello World", second=42).

TestClass5 — обработчик, считывающий значения свойств аннотации и выводящий их.

Результат: <img width="487" height="113" alt="image" src="https://github.com/user-attachments/assets/2934e08e-bca7-433b-8d34-4101993a65fc" />

Аннотация корректно считывается, значения свойств выводятся.

Задание №6: Аннотация @Cache
Разработать аннотацию @Cache, которая применяется к типам, доступна во время выполнения и имеет необязательное свойство value типа String[]. По умолчанию пустой массив. Создать классы с аннотацией, указав несколько областей кеша и пустой массив. Реализовать обработчик, который выводит список областей или сообщение о пустом списке. Написать тесты на JUnit.

Классы:
Cache — аннотация с массивом строковых значений.

TestClass6 — аннотирован @Cache({"users", "age", "key"}).

TestClass7 — аннотирован @Cache() (пустой массив).

HandlerCache — обработчик, выводящий список кешируемых областей или сообщение о пустом списке.

CacheAnnotationTest — тесты на JUnit: проверка значений, пустого массива, мок‑тест обращения к кешу, проверка нескольких областей.

Результат: <img width="702" height="173" alt="image" src="https://github.com/user-attachments/assets/97f4a052-2bde-4838-8347-1856ab63ff50" />

Аннотация корректно считывается, тесты подтверждают работу обработчика.

Задание №7:
Разработать аннотацию @Default, которая применяется к типам и полям, доступна во время выполнения и имеет обязательное свойство value типа Class. Создать классы и поля с этой аннотацией. Реализовать обработчик, который выводит указанный тип по умолчанию. Написать тесты с использованием JUnit, которые проверяют корректность обработки аннотации.

Классы и аннотация:
Default — аннотация с обязательным свойством value.

ClassAnnotation — аннотирован типом String.

FieldAnnotation — содержит поле с типом Integer по умолчанию.

ListAnnotation — аннотирован типом List.

TestClass2 — аннотирован типом String, содержит поля с разными типами по умолчанию.

Handler — обработчик, проверяющий аннотации на классах и полях.

Тесты:
testClassAnnotation — проверяет наличие аннотации @Default на классе ClassAnnotation и сравнивает значение свойства value со String.class..

testFieldAnnotation — проверяет наличие аннотации @Default на поле defaultField класса FieldAnnotation и сравнивает значение свойства value с Integer.class..

testFieldWithoutAnnotation — проверяет, что поле normalField класса FieldAnnotation не имеет аннотации @Default.

testDifferentClasses — параметризованный тест, проверяющий аннотацию @Default на нескольких классах (ClassAnnotation, ListAnnotation) и сравнивающий значение свойства value с ожидаемым типом.

Задание №8:
Разработать аннотацию @Cache, которая применяется к типам, доступна во время выполнения и имеет необязательное свойство value типа String[]. По умолчанию массив пустой. Создать классы с аннотацией, указав несколько областей кеша и пустой массив. Реализовать обработчик, который выводит список областей или сообщение о пустом списке. Написать тесты с использованием JUnit, которые проверяют корректность обработки аннотации.

Классы и аннотация:
Cache — аннотация с массивом строковых значений.

TestClass6 — аннотирован @Cache с областями: "users", "age", "key".

TestClass7 — аннотирован @Cache без указания областей (пустой массив).

HandlerCache — обработчик, который через Reflection считывает аннотацию и выводит список областей или сообщение о пустом списке.

Тесты (CacheAnnotation):
testCacheAnnotation — проверяет, что у TestClass6 аннотация присутствует и список областей совпадает с ожидаемыми значениями.

testMockCache — мок‑тест с использованием вспомогательного класса FakeCache. Имитация записи и получения данных из кеша для областей "users", "age", "key". Проверяется количество записей и корректность значений.

testEmptyCache — проверяет, что у TestClass7 аннотация присутствует, но массив областей пустой.

testMultipleCache — отдельный тест для случая, когда кеш содержит несколько областей. Проверяется количество и порядок значений.

Вспомогательный класс:
FakeCache — простой класс‑имитация кеша на основе HashMap. Содержит методы put, get, size для сохранения и получения данных.

Результаты для заданий 7 и 8: <img width="445" height="573" alt="image" src="https://github.com/user-attachments/assets/54af5df5-492c-4d3c-bb98-e8710c7b4202" />

